$(function(){$(".how,.tooltip-how").on("mouseover",function(){$(".tooltip-how").show()}),$(".how,.tooltip-how").on("mouseout",function(){$(".tooltip-how").hide()}),$(".presenter-dismiss").on("click",function(){$(".presenter").fadeOut(500)}),$.get(LESSON_API+"/api/member/auth",function(s){if(0==s.err){var e=s.data;1==e.firstInFlag&&openDialog({width:"auto",messageClass:"open-message",message:R.msg_first_in},function(){$.post(LESSON_API+"/api/member/firstIn")}),$(".name").html(e.username),e.portrait.startWith("http")||(e.portrait=KEEPWORK_HOST+e.portrait),$(".portrait").attr("src",e.portrait),$(".coins-num").html(e.coin),$(".read-lines-num").html(e.codeReadLine),$(".written-lines-num").html(e.codeWriteLine),$(".Commands-lines-num").html(e.commands),e.presenter||$(".presenter").removeClass("display-none").addClass("display-block")}}),$(".add-presenter").on("click",function(){var s=$('input[name="presenter-name"]').val();""!=s?$.post("/api/member/addPresenter",{presenter:s},function(s){0==s.err?(openDialog({width:"auto",messageClass:"open-message",message:R.msg_add_presenter}),$(".coins-num").html(s.data.coin),$(".presenter").fadeOut(500)):104==s.err?openDialog({width:"auto",messageClass:"open-message",message:R.msg_not_valid_account}):105==s.err&&openDialog({width:"auto",messageClass:"open-message",message:R.msg_not_allow_two_presenter})}):openDialog({width:"auto",messageClass:"open-message",message:R.msg_not_valid_account})});$.get(LESSON_API+"/api/package/learnList",{psize:50,pno:1},function(s){if(0==s.err)if(Array.isArray(s.data)){$(".package-list").removeClass("display-none").addClass("display-block"),$(".lesson-total").html(s.page.totalCount);for(var e=0;e<s.data.length;e++){var a=s.data[e];0==a.agesMax&&0==a.agesMin?a.ageMsg=R.suitable4all:a.ageMsg=a.agesMin+"-"+a.agesMax,2==a.subscribeState?a.url="":1==a.subscribeState&&(a.url=a.nextLearnLesson?KEEPWORK_HOST+a.nextLearnLesson:KEEPWORK_HOST+a.firstLessonUrl),a.packageUrl.startWith("http")||(a.packageUrl=KEEPWORK_HOST+a.packageUrl);var n='<div class="el-col el-col-12 el-col-xs-12 el-col-sm-12 el-col-md-8 el-col-lg-8 el-col-xl-8">    <a href="'+a.packageUrl+'" target="_blank" class="lesson-cover">        <div style="background-image: url('+a.cover+');"></div>    </a>    <a href="'+a.packageUrl+'" target="_blank" class="title">'+a.title+'</a>    <div class="time">'+R.include+": <span>"+a.lessonCount+"</span> "+R.lessons+'</div>    <div class="ages">'+R.ages+": <span>"+a.ageMsg+'</span></div>    <div class="skills">'+R.skills+": <span>"+a.skills+'</span></div>    <div class="progress">',t=Number((a.doneCount/a.lessonCount*100).toFixed(1));a.lessonProgress=100<t?100:t,a.doneCount>=a.lessonCount?n+='<div class="finished"><span>'+R.finished+'<span><i class="el-icon-success"></i></div>':0==a.doneCount?n+='<div class="start"><a href="'+KEEPWORK_HOST+a.firstLessonUrl+'" class="el-button el-button--primary el-button--mini"><span>'+R.start_to_learn+"<span></a></div>":(n+='<div class="lessons-progress"><div class="el-progress el-progress--line el-progress--text-inside"><div class="el-progress-bar"><div class="el-progress-bar__outer" style="height: 10px;"><div class="el-progress-bar__inner" style="width: '+a.lessonProgress+'%;"></div></div></div><div class="progress-tip">'+R.have_learned+" "+a.doneCount+" "+R.lessons+'</div></div><div class="continu-btn">',""==a.url?n+='<button class="btn_continue continue el-button el-button--primary el-button--mini"><span>Continue</span></button>':n+='<a href="'+a.url+'" class="continue el-button el-button--primary el-button--mini"><span>'+R.continue+"</span></a>",n+="</div></div>"),n+="</div></div>",$(".lesson-list .el-row").append(n)}$(".btn_continue").on("click",function(){openDialog({width:"auto",messageClass:"open-message",message:R.msg_plz_add_pkg})})}else $(".no-data").removeClass("display-none").addClass("display-block")})});