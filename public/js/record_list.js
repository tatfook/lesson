var username=$("#username").val(),PAGE_SIZE=50;$(function(){$.get(LESSON_API+"/api/member/statis",{username:username},function(e){var s=e.data;s&&(0<s.teached&&0<s.learned?($(".tab-nav").show(),getTaughtRecordList(PAGE_SIZE,1)):0<s.teached&&0==s.learned?getTaughtRecordList(PAGE_SIZE,1):0==s.teached&&0<s.learned&&getLearnRecordList(PAGE_SIZE,1))});var e=!1,s=!1;$(".have-taught").on("click",".sort-btn",function(){e?(getTaughtRecordList(PAGE_SIZE,1),$(this).find(".el-icon-caret-top").addClass("active").siblings().removeClass("active"),e=!1):(getTaughtRecordList(PAGE_SIZE,1,"asc"),$(this).find(".el-icon-caret-bottom").addClass("active").siblings().removeClass("active"),e=!0)}),$(".have-learn").on("click",".sort-btn",function(){s?(getLearnRecordList(PAGE_SIZE,1),$(this).find(".el-icon-caret-top").addClass("active").siblings().removeClass("active"),s=!1):(getLearnRecordList(PAGE_SIZE,1,"asc"),$(this).find(".el-icon-caret-bottom").addClass("active").siblings().removeClass("active"),s=!0)}),$("#tab-have-taught").on("click",function(){$(this).addClass("current").siblings().removeClass("current"),getTaughtRecordList(PAGE_SIZE,1)}),$("#tab-have-learn").on("click",function(){$(this).addClass("current").siblings().removeClass("current"),getLearnRecordList(PAGE_SIZE,1)})});var getTaughtRecordList=function(e,s,a,o){o=void 0===o||o,$(".have-taught").show(),$(".have-learn").hide(),$.get(LESSON_API+"/api/class/taught",{username:username,psize:e,pno:s,order:a},function(e){if(0==e.err){var s=$(".have-taught-list");o&&s.html("");for(var a=0;a<e.data.length;a++){var t=e.data[a];t.lessonCover=t.lessonCover.startsWith("http")?t.lessonCover:KEEPWORK_HOST+t.lessonCover,s.append('<div class="have-item"><div class="time">'+new Date(t.startTime).format("hh:mm dd/MM/yyyy")+'</div><div class="layout-box">    <a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title"><div class="cover" style="background-image: url('+t.lessonCover+')"></div></a>    <div class="content">        <a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title">Lesson '+t.lessonNo+"："+t.lessonTitle+'</a>        <div class="goals">            <span>Lesson Goals:</span>            <ul>                <li>'+t.goals+'</li>            </ul>        </div>        <div class="foot">            <a href="/taughtedRecord/'+t.classId+'" class="el-button el-button--primary el-button--medium is-plain">View Summary</a>        </div>    </div></div></div>')}}})},getLearnRecordList=function(e,s,a,o){o=void 0===o||o,$(".have-taught").hide(),$(".have-learn").show(),$.get(LESSON_API+"/api/record/learn",{username:username,psize:e,pno:s,order:a},function(e){if(0==e.err){var s=$(".have-learn-list");o&&s.html("");for(var a=0;a<e.data.length;a++){var t=e.data[a];t.lessonCover=t.lessonCover.startsWith("http")?t.lessonCover:KEEPWORK_HOST+t.lessonCover,s.append('<div class="have-item"><div class="layout-box">    <a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title"><div class="cover" style="background-image: url('+t.lessonCover+')"></div></a>    <div class="content">        <a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title">Lesson '+t.lessonNo+"："+t.lessonTitle+'</a>        <div class="goals">            <span>Lesson Goals:</span>            <ul>                <li>'+t.goals+'</li>            </ul>         </div>        <div class="foot">            <a href="/learnedRecord/'+username+"/"+t.lessonNo+'" class="el-button el-button--primary el-button--medium is-plain">View Summary</a>            <div class="scores-info">                <span>Latest Scores: <em>'+(t.latestScore?t.latestScore:0)+"</em></span>                <span>Best Scores: <em>"+(t.bestScore?t.bestScore:0)+"</em></span>            </div>        </div>    </div></div>")}}})};