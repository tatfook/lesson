$(function(){var t="";$.get(LESSON_API+"/api/member/auth",function(a){if(0==a.err){var e=a.data;1==e.firstInFlag&&openDialog({width:"auto",messageClass:"open-message",message:R.msg_first_in},function(){$.post(LESSON_API+"/api/member/firstIn")}),$(".name").html(e.username),t=e.username,e.portrait.startWith("http")||(e.portrait=KEEPWORK_HOST+e.portrait),$(".portrait").attr("src",e.portrait),$(".attended-num").html(e.teachedCount);var s=45*e.teachedCount;$(".Total-time-hr").html(Math.floor(s/60)),$(".Total-time-min").html(Math.floor(s%60)),i(50,1)}});var a=!1;$(".have-taught").on("click",".sort-btn",function(){a?(i(50,1),$(this).find(".el-icon-caret-top").addClass("active").siblings().removeClass("active"),a=!1):(i(50,1,"asc"),$(this).find(".el-icon-caret-bottom").addClass("active").siblings().removeClass("active"),a=!0)}),$(".add-activation").on("click",function(){var a=$('input[name="activation-code"]').val();""!=a?$.post(LESSON_API+"/api/member/activate",{key:a},function(a){0==a.err?openDialog({width:"auto",messageClass:"open-message",message:R.msg_successfully_activated},function(){window.location.href="/teacherColumn/detail"}):123==a.err?openDialog({width:"auto",messageClass:"open-message",message:R.msg_activated_account}):124==a.err?openDialog({width:"auto",messageClass:"open-message",message:R.msg_incorrect_cdkey}):125==a.err&&openDialog({width:"auto",messageClass:"open-message",message:R.msg_already_used_cdkey})}):openDialog({width:"auto",messageClass:"open-message",message:R.msg_plz_input_cdkey})});var i=function(a,e,s,l){l=void 0===l||l,$.get(LESSON_API+"/api/class/taught",{username:t,psize:a,pno:e,order:s},function(a){if(0==a.err)if(Array.isArray(a.data)){var e=$(".have-taught-list");$(".have-taught").removeClass("display-none").addClass("display-block"),l&&e.html("");for(var s=0;s<a.data.length;s++){var t=a.data[s];t.lessonCover=t.lessonCover.startsWith("http")?t.lessonCover:KEEPWORK_HOST+t.lessonCover;var i='<div class="have-item"><div class="time">'+new Date(t.startTime).format("hh:mm dd/MM/yyyy")+'</div><div class="layout-box el-row el-row--flex">    <div class="item-cover "><a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title"><div class="cover" style="background-image: url('+t.lessonCover+')"></div></a></div>    <div class="content">';if(t.pkgs){i+='<div class="package-title"><span>'+R.pkg+": </span>";for(var o=0;o<t.pkgs.length;o++)i+='<a href="'+(KEEPWORK_HOST+t.pkgs[o].pkgUrl)+'" target="_blank" class="title"> '+t.pkgs[o].pkgTitle+"</a>";i+="</div>"}i+='<div class="lesson-title"><a href="'+(KEEPWORK_HOST+t.lessonUrl)+'" target="_blank" class="title">'+R.lesson+" "+t.lessonNo+"：<span>"+t.lessonTitle+'</span></a></div>        <div class="duration">'+R.duration+"：<span>45"+R.minutes+'</span></div>        <div class="goals">            <div>'+R.goals+":</div>            <ul>                <li>"+t.goals+'</li>            </ul>        </div>        <div class="foot">            <a href="/taughtedRecord/'+t.classId+'" class="el-button el-button--primary el-button--mini">'+R.view_summary+"</a>        </div>    </div></div></div>",e.append(i)}}else $(".no-data").removeClass("display-none").addClass("display-block")})}});