<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Lesson</title>
    <link href="{{__data__.baseUrl}}/csslib/element-ui.css" rel="stylesheet" />
    <link href="{{__data__.baseUrl}}/css/common.css" rel="stylesheet" />
    <script src="{{__data__.baseUrl}}/jslib/jquery.min.js"></script>
    <script src="{{__data__.baseUrl}}/js/common.js?v=2"></script>
    {{? link}}
</head>
<body>
    <input hidden value="{{__data__.baseUrl}}" id="baseURL"/>
    <input hidden value="{{__data__.keepworkHost}}" id="keepworkHost"/>
    <input hidden value="{{__data__.frontResource}}" id="frontResource" />
    <script>
        var LESSON_API = $('#baseURL').val() || '';
        var KEEPWORK_HOST = $('#keepworkHost').val() || '';
        var R = JSON.parse( $('#frontResource').val() );
    </script>
    {{^__data__.headerShow}}
    <div class="header noprint">
        <div class="nav-bar">
            <div class="brand">
                <a href="{{__data__.keepworkHost}}">
                    <img src="{{__data__.keepworkHost}}/wiki/assets/imgs/icon/logo.svg"/>
                </a>
            </div>
            <div class="menu">
                <a href="{{__data__.baseUrl}}/" class="{{homeCurrent}}">{{__data__.string.home}}</a>
                <a href="{{__data__.baseUrl}}/lesson" class="{{lessonCurrent}}">{{__data__.string.lessons}}</a>
                <!-- <a href="/buy" class="{{buyCurrent}}">{{__data__.string.buy}}</a> -->
                <!-- <a href="/myRecord" class="{{recordCurrent}}">{{__data__.string.record}}</a> -->
                <a href="{{__data__.baseUrl}}/learningRecord" class="{{learningCurrent}}">{{__data__.string.learning_record}}</a>
                <a href="{{__data__.baseUrl}}/teacherColumn" class="{{teacherCurrent}}">{{__data__.string.teacher_column}}</a>
                <div class="to-download">
                    <a href="http://www.paracraft.cn/download" target="_blank">Paracraft<i class="el-icon-download"></i></a>
                </div>
            </div>
            <div class="account">
                {{#__data__.isLogin}}
                <a onclick="signout()">{{__data__.string.signout}}</a>
                {{/__data__.isLogin}}
                {{^__data__.isLogin}}
                <a onclick="signin()">{{__data__.string.login}}</a>
                <a class="diver"/>
                <a onclick="signup()">{{__data__.string.signup}}</a>
                {{/__data__.isLogin}}
            </div>
        </div>
    </div>
    {{/__data__.headerShow}}
    <div class="main">
        {{? content}}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script>
        function signin() {
            window.location = KEEPWORK_HOST + '/wiki/login?redirect=' + window.location.href
        }
        function signup() {
            window.location = KEEPWORK_HOST + '/wiki/join?redirect=' + window.location.href
        }
        function signout() {
            Cookies.remove('token')
            Cookies.remove('token', { path: '/' })
            window.localStorage.removeItem('satellizer_token')
            window.location.reload()
        }
    </script>
    <!-- <script>
        // // setInterval(function(){
        //     // iFrame 通讯
        //     if (window.parent !== window) {
        //         var height = $('body').outerHeight() + 400;
        //         console.log('lesson echo: ' + height)
        //         window.parent.postMessage({cmd:'element_style', selector:'iframeId', style:{'height':height + 'px'}}, KEEPWORK_HOST);
        //     }
        // // }, 1000)

        // function getCookie(c_name) {
        //     if (document.cookie.length>0){
        //         c_start=document.cookie.indexOf(c_name + "=")
        //         if (c_start!=-1) {
        //             c_start=c_start + c_name.length+1
        //             c_end=document.cookie.indexOf(";",c_start)
        //             if (c_end==-1) c_end=document.cookie.length
        //             return unescape(document.cookie.substring(c_start,c_end))
        //         }
        //     }
        //     return ""
        // }
        // // alert(getCookie("token"));
    </script> -->
</body>
</html>